<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PIS-1274 + ADXL354 即時示波器</title>

<!-- Chart.js 繪圖函式庫 -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
/* ===== 基本版面樣式 ===== */
body {
  font-family: system-ui, -apple-system, "Microsoft JhengHei";
  background:#f6f8fb;
  margin:12px;
}

header {
  display:flex;
  align-items:center;
  gap:12px;
}

/* 卡片外觀（類似儀表板） */
.card {
  background:white;
  border-radius:10px;
  padding:10px;
  box-shadow:0 6px 18px rgba(0,0,0,.06);
}

/* 上方控制列 */
.controls {
  display:flex;
  gap:8px;
  align-items:center;
  margin:10px 0;
}

.btn {
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #ccc;
  background:white;
  cursor:pointer;
}

.btn.primary {
  background:#2563eb;
  color:white;
}

/* 主畫面三欄 */
#main {
  display: grid;
  grid-template-columns: 1fr 220px;
  gap: 12px;
}
/* 左側示波器上下排列 */
#charts {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

canvas {
  width:100%;
  height:320px;
}

/* 音量條 */
#volBar {
  width:60px;
  height:160px;
  background:#eee;
  border-radius:8px;
  margin:auto;
  position:relative;
  overflow:hidden;
}

#volFill {
  position:absolute;
  bottom:0;
  width:100%;
  height:0%;
  background:linear-gradient(180deg,#34d399,#60a5fa);
}

.small {
  font-size:13px;
  color:#555;
}
</style>
</head>

<body>

<header>
  <h2>PIS-1274 + ADXL354 即時示波器</h2>
  <div class="small">ESP32 Web Serial 即時監測</div>
</header>

<!-- ===== 連線控制 ===== -->
<div class="controls card">
  <button id="connectBtn" class="btn primary">Connect</button>
  <button id="disconnectBtn" class="btn" disabled>Disconnect</button>
  <span class="small">狀態：<b id="status">未連接</b></span>
</div>

<!-- ===== 主畫面 ===== -->
<section id="main">

  <!-- 麥克風電壓示波器 -->
  <div class="card">
    <b>麥克風電壓（ADC）</b>
    <canvas id="waveChart"></canvas>
    <div class="small" id="micText">0.00 V</div>
  </div>

  <!-- ADXL354 XYZ 三軸示波器 -->
  <div class="card">
    <b>ADXL354 三軸加速度（Raw ADC）</b>
    <canvas id="accelChart"></canvas>
    <div class="small" id="accelText">X:0 Y:0 Z:0</div>
  </div>

  <!-- 音量 RMS 條 -->
  <div class="card" style="text-align:center">
    <b>聲音能量（RMS）</b>
    <div id="volBar">
      <div id="volFill"></div>
    </div>
    <div id="volText">0.00 V</div>
  </div>

</section>

<!-- 載入你的主程式 -->
<script src="main.js"></script>

</body>
</html>
